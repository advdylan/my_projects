{% extends "layout.html" %}

{% block title %}
    Insert Manualy
{% endblock %}

{% block main %}

<div class="tables">
  
  <table id="data" class="table table-sm table-bordered table-hover ">
      <thead>
          <tr class="table-dark table-hover">
          <th scope="col">ZD</th>
          <th scope="col">Name</th>
          <th scope="col">Category</th>
          <th scope="col">Size</th>
          <th scope="col">Color</th>
          <th scope="col">Wood</th>
          <th scope="col">Symbol</th>
          <th scope="col">Date</th>
          <th scope="col">----Status----</th>
          <th scope="col">DELETE</th>
          <th scope="col">SEND</th>
          <th scope="col">FINISH</th>
          </tr>
      </thead>
      <tbody>
          {% for dict_item in orders %}
          <tr class="table-light table-hover">
              <td>{{ dict_item['ZD'] }}</td>
              <td>{{ dict_item['Nazwa w sklepie'] }}</td>
              <td>{{ dict_item['Nazwa kategorii'] }}</td>
              <td>{{ dict_item['Wymiary'] }}</td>
              <td>{{ dict_item['Kolor drewna'] }}</td>
              <td>{{ dict_item['Rodzaj drewna'] }}</td>
              <td>{{ dict_item['Symbol'] }}</td>
              <td>{{ dict_item['date'] }}</td>
              {% if dict_item['status'] == 0 %}
              <td> <div class="progress">
                <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
              </div> </td>
              {% endif %}
              {% if dict_item['status'] == 1 %}
              <td> <div class="progress">
                <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" style="width: 20%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
              </div> </td>
              {% endif %}
              {% if dict_item['status'] == 2 %}
              <td> <div class="progress">
                <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: 40%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
              </div> </td>
              {% endif %}
              {% if dict_item['status'] == 3 %}
              <td> <div class="progress">
                <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: 60%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
              </div> </td>
              {% endif %}
              {% if dict_item['status'] == 4 %}
              <td> <div class="progress">
                <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 80%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
              </div> </td>
              {% endif %}
              {% if dict_item['status'] == 5 %}
              <td> <div class="progress">
                <div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
              </div> </td>
              {% endif %}
              <td>
                <form action="/delete_row" method="post">
                  <input type="hidden" name="indexcode" value="{{ dict_item['Kod EAN'] }}">
                  <button type="submit" class="btn btn-outline-danger">DELETE</button>
              </form>
              </td>
              <td>
                <form class="sendtoproduction" action="/sendtoproduction" method="post">
                  <input type="hidden" name="indexcode" value="{{ dict_item['Kod EAN'] }}">
                  <input type="hidden" name="ZD" value="{{ dict_item['ZD'] }}">
                  <input type="hidden" name="week" value="{{ dict_item['week'] }}">
                  <button type="submit" class="btn btn-outline-warning">SEND TO PRODUCTION</button>
                  
              </form>
              </td>
              <td>
                <form class="sendtoproduction" action="/sendtowarehouse" method="post">
                <input type="hidden" name="indexcode" value="{{ dict_item['Kod EAN'] }}">
                <input type="hidden" name="ZD" value="{{ dict_item['ZD'] }}">
                <input type="hidden" name="week" value="{{ dict_item['week'] }}">
                <button type="submit" class="btn btn-outline-success">SEND TO WAREHOUSE</button>
              </form>
              </td>
          </tr> 
          {% endfor %}

          {% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-dismissible alert-{{ category }}">
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  <strong>{{ category.upper() }}</strong>: {{ message }}
</div>
{% endfor %}
{% endif %}
{% endwith %}


          
      </tbody>
      </table>
      {% block scripts %}
      <script>
        var jq = jQuery.noConflict();
        </script>
      <script>
        jq(document).ready(function(){
          jq('#data').DataTable();
        });

      </script>
      {% endblock %}
</div>
       </div>
        <script>
          jq(document).ready(function(){
              jq("#sendtoproduction").on("submit", function(event){
                  event.preventDefault();
                  jq.ajax({
                      url: "/sendtoproduction",
                      type: "POST",
                      data: jq(this).serialize(),
                      success: function(response){
                        alert(response.message);
                      }
                  });
              });
          });
          </script>

{% endblock %}